charts:
  ## gitlab and renku chart versions are not evolving together. Uncomment
  ## this only when explicitly building the gitlab chart and set the appropriate tag.
  # - name: gitlab
  #   imagePrefix: renku/
  #   repo:
  #     git: SwissDataScienceCenter/helm-charts
  #     published: https://swissdatasciencecenter.github.io/helm-charts
  #   paths:
  #     - ./gitlab

  - name: helm-chart/renku
    resetTag: latest
    imagePrefix: renku/
    repo:
      git: SwissDataScienceCenter/helm-charts
      published: https://swissdatasciencecenter.github.io/helm-charts
    paths:
      - helm-chart
      - acceptance-tests
      - scripts/init-realm
      - certificates
    images:
      tests:
        buildArgs:
          BUILDKIT_INLINE_CACHE: "1"
        contextPath: acceptance-tests
        dockerfilePath: acceptance-tests/Dockerfile
        valuesPath: tests.image
        paths:
          - acceptance-tests
      init-realm:
        contextPath: scripts/init-realm
        dockerfilePath: scripts/init-realm/Dockerfile
        valuesPath: keycloak.initRealm.image
        paths:
          - scripts/init-realm
      certificates:
        contextPath: certificates
        dockerfilePath: certificates/Dockerfile
        # Note: Add back the values path with https://github.com/SwissDataScienceCenter/renku-notebooks/pull/788
        # valuesPath: global.certificates.image
        paths:
          - certificates
